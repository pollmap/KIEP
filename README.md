# KIEP - Korea Industrial Ecosystem Platform

> 전국 250개 시군구의 산업, 인구, 경제, 부동산, 고용, 교육, 상권, 의료/복지, 안전, 환경, 인프라, 교통, 문화관광 — **13개 분야 65개 지표**를 지도 위에 시각화하는 종합 지역 데이터 플랫폼

## 목적

대한민국의 공공 데이터는 기관별로 분산되어 있어, 특정 지역의 종합적 현황을 파악하기 어렵습니다. KIEP는 국민연금, 국세청, 금감원, 통계청, 국토교통부, 소상공인진흥공단 등 **6개 공공데이터 소스**를 사업자등록번호 기반으로 통합하여, 시군구 단위로 산업 생태계의 건강도를 시각화합니다.

## 주요 기능

### 지도 시각화 (메인 페이지)
- **250개 시군구** 코로플레스(Choropleth) 지도 — 선택한 지표에 따라 색상 변화
- **13개 데이터 카테고리**, 65개 레이어 실시간 전환
- **지하철 노선 / 고속도로 오버레이** — 교통 인프라 시각화
- **2000~2025 타임라인** — 26년간 시계열 데이터 재생 (0.5x~4x 속도)
- 지역 클릭 시 상세 사이드바 (산업 분포, 시계열 트렌드, 순위)
- 광역시도 필터링, 지역 검색, CSV 데이터 내보내기

### 대시보드
- 전국 250개 시군구 종합 통계 (12개 핵심 KPI)
- 광역시도별 건강도 비교 차트 / 건강도 등급 분포 파이차트
- 상위/하위 10개 지역 랭킹

### 지역 분석
- 선택 지역의 산업 구조 분석 (파이차트 + 바차트)
- 주요 지표 게이지 카드
- 비교 분석 (전국 평균 대비)

### 지역 비교 벤치마크
- 최대 4개 지역 동시 비교
- 레이더차트 (6축 다차원 비교), 건강도 바차트, 상세 비교표

### 지역 랭킹
- 65개 지표별 전국 시군구 정렬
- 광역시도 필터, 검색, 상위/하위 10개 하이라이트

### 기업 탐색
- 주요 기업의 매출, 종업원 수, 소재지 정보
- 업종별 필터, 검색

### 산업단지 현황
- 50개 산업단지의 입주업체, 가동률, 생산액, 수출액, 고용 현황
- 유형별 필터 (국가/일반/도시첨단/농공)

## 페르소나

| 페르소나 | 활용 시나리오 |
|---------|------------|
| **지자체 정책 담당자** | 우리 지역의 산업 건강도를 전국 대비 벤치마크하고, 취약 분야를 식별 |
| **산업 연구원** | 26년간 시계열 데이터로 지역 산업 구조 변화 추이 분석 |
| **스타트업 / 기업** | 입지 선정 시 인구, 고용, 교통, 상권 등 다차원 데이터로 의사결정 |
| **부동산 투자자** | 지가, 아파트 가격, 인구 유입, 인프라 데이터를 종합적으로 비교 |
| **언론 / 시민** | 지역 간 격차, 고령화, 환경, 안전 등 사회 이슈를 데이터로 탐색 |

## 아키텍처

```
┌─────────────────────────────────────────────────────────────┐
│                    Frontend (Next.js 15)                      │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────────────┐ │
│  │ MapLibre │ │ Recharts │ │Tailwind  │ │  Static Export   │ │
│  │ GL JS    │ │ (Charts) │ │CSS       │ │  (Vercel/CDN)    │ │
│  └──────────┘ └──────────┘ └──────────┘ └──────────────────┘ │
└───────────────────────┬─────────────────────────────────────┘
                        │ JSON (static)
┌───────────────────────┴─────────────────────────────────────┐
│               Data Layer (GeoJSON + JSON)                    │
│  regions.json · sample-regions.json · sample-historical.json │
│  subway-lines.json · major-roads.json                        │
└───────────────────────┬─────────────────────────────────────┘
                        │ (future: REST API)
┌───────────────────────┴─────────────────────────────────────┐
│                  Backend (Rust Workspace)                     │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐       │
│  │kiep-core │ │kiep-etl  │ │kiep-api  │ │kiep-cli  │       │
│  │(types)   │ │(pipeline)│ │(axum)    │ │(tool)    │       │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘       │
└───────────────────────┬─────────────────────────────────────┘
                        │
┌───────────────────────┴─────────────────────────────────────┐
│            PostgreSQL 16 + PostGIS 3.4 (Docker)              │
└─────────────────────────────────────────────────────────────┘
```

## 기술 스택

| 분류 | 기술 |
|------|------|
| **Frontend** | Next.js 15, React 19, TypeScript 5.7, Tailwind CSS 3.4 |
| **지도** | MapLibre GL JS 4.7 (CARTO Voyager 타일) |
| **차트** | Recharts 2.15 (Bar, Pie, Radar, Line, Area) |
| **Backend** | Rust (workspace: kiep-core, kiep-etl, kiep-api, kiep-cli) |
| **DB** | PostgreSQL 16 + PostGIS 3.4 |
| **빌드** | `next build` → Static HTML/JS export |
| **배포** | Vercel (프론트엔드), Docker Compose + Caddy (백엔드) |
| **GeoJSON** | southkorea-maps 기반, 18MB → 2.5MB 최적화 |

## 프로젝트 구조

```
kiep/
├── crates/
│   ├── kiep-core/          # 공유 타입, 설정, 에러
│   ├── kiep-etl/           # 데이터 수집 및 가공 파이프라인
│   ├── kiep-api/           # REST API 서버 (axum)
│   └── kiep-cli/           # CLI 도구
├── web/                    # Next.js 프론트엔드
│   ├── src/
│   │   ├── app/
│   │   │   ├── page.tsx              # 메인 지도 페이지
│   │   │   ├── dashboard/page.tsx    # 대시보드
│   │   │   ├── analysis/page.tsx     # 지역 분석
│   │   │   ├── compare/page.tsx      # 지역 비교
│   │   │   ├── rankings/page.tsx     # 지역 랭킹
│   │   │   ├── company/page.tsx      # 기업 탐색
│   │   │   └── complex/page.tsx      # 산업단지
│   │   ├── components/
│   │   │   ├── Map/KoreaMap.tsx       # MapLibre 지도 컴포넌트
│   │   │   ├── Nav/GlobalNav.tsx      # 글로벌 내비게이션
│   │   │   └── Layout/               # Sidebar, Legend, Timeline 등
│   │   └── lib/
│   │       ├── constants.ts           # 13개 카테고리, 65개 레이어 정의
│   │       └── types.ts              # TypeScript 인터페이스
│   └── public/data/                   # 정적 데이터 파일
├── scripts/                # ETL 스크립트, 데이터 생성기
├── sql/                    # DB 마이그레이션
├── docker-compose.yml      # 개발 환경
├── docker-compose.prod.yml # 프로덕션 환경
├── Caddyfile               # 리버스 프록시 설정
└── Cargo.toml              # Rust 워크스페이스
```

## 13개 데이터 카테고리

| # | 카테고리 | 레이어 수 | 주요 지표 |
|---|---------|----------|----------|
| 1 | 산업 | 8개 | 산업건강도, 사업체수, 종사자수, 성장률, 창업률, 폐업률, 제조업비중, 중소기업비율 |
| 2 | 인구 | 7개 | 인구수, 인구증감, 고령화율, 청년비율, 출생률, 외국인비율, 순이동률 |
| 3 | 경제 | 5개 | GRDP, GRDP성장률, 지방세수입, 재정자립도, 지역소비 |
| 4 | 부동산 | 5개 | 평균지가, 지가변동률, 아파트매매가, 아파트가격변동률, 건축허가 |
| 5 | 고용 | 5개 | 고용률, 실업률, 평균임금, 일자리증감, 청년고용률 |
| 6 | 교육 | 5개 | 학교수, 학생수, 대학수, 도서관수, 교육재정 |
| 7 | 상권 | 5개 | 상가수, 개업률, 폐업률, 프랜차이즈수, 점포당매출 |
| 8 | 의료/복지 | 5개 | 의료기관수, 의사수, 병상수, 노인복지시설, 어린이집 |
| 9 | 안전 | 4개 | 범죄율, 교통사고, 화재건수, 재해피해액 |
| 10 | 환경 | 4개 | 미세먼지, 녹지비율, 폐기물, 수질등급 |
| 11 | 인프라 | 4개 | 도로율, 상수도보급률, 하수도보급률, 공원면적 |
| 12 | 교통 | 5개 | 대중교통접근성, 지하철역수, 버스노선수, 일일이용객, 통근시간 |
| 13 | 문화관광 | 3개 | 문화시설수, 관광객수, 숙박시설수 |

## 산업 건강도 산출 공식

```
건강도 = 0.30 × 고용증감률(정규화)
       + 0.25 × 신규사업자비율(정규화)
       + 0.20 × (1 - 폐업률)(정규화)
       + 0.15 × 매출증가율(정규화)
       + 0.10 × 산단가동률(정규화)
```

| 등급 | 점수 | 색상 |
|------|------|------|
| 활발 | 90+ | 초록 |
| 양호 | 70-89 | 연초록 |
| 보통 | 50-69 | 노랑 |
| 주의 | 30-49 | 주황 |
| 위험 | <30 | 빨강 |

## 실행 방법

### 프론트엔드만 실행 (가장 빠름)

```bash
cd web
npm install
npm run dev
# → http://localhost:3000
```

### 풀스택 (Backend + DB + Frontend)

```bash
# 1. 데이터베이스 시작
docker compose up -d

# 2. DB 스키마 초기화
cargo run -p kiep-cli -- init-db

# 3. ETL 실행 (데이터 수집)
cargo run -p kiep-etl

# 4. API 서버 시작
cargo run -p kiep-api
# → http://localhost:8080

# 5. 프론트엔드 시작
cd web && npm run dev
# → http://localhost:3000
```

### 정적 빌드 & 배포

```bash
cd web
npm run build    # output: "export" → out/ 디렉토리에 정적 파일 생성
# out/ 디렉토리를 Vercel, Netlify, Nginx, Caddy 등에 서빙
```

### Docker 프로덕션 배포

```bash
docker compose -f docker-compose.prod.yml up -d
# Caddy가 자동으로 HTTPS 설정 + 리버스 프록시
```

## 데이터 소스

| 기관 | 데이터 | 업데이트 주기 |
|------|-------|-------------|
| 국민연금 (NPS) | 사업장 가입현황, 고용 | 월간 |
| 국세청 (NTS) | 사업자 등록/폐업 상태 | 수시 |
| 금융위 (FSC) | 상장법인 재무제표 | 분기 |
| 조달청 (PPS) | 나라장터 계약 | 일간 |
| 산단공 (KICOX) | 산업단지 통계 | 분기 |
| 통계청 (KOSIS) | 인구, 경제, 고용 통계 | 월간/연간 |

**통합 키**: 사업자등록번호 10자리 (기업 단위), 법정동코드 10자리 (지역 단위)

## 특징 및 차별성

### 차별성
1. **6개 데이터 사일로 통합**: 각 기관에 흩어진 데이터를 사업자등록번호 하나로 연결
2. **시군구 단위 세밀도**: 광역시/도가 아닌 250개 시군구 단위 분석
3. **13개 분야 종합**: 산업뿐 아니라 인구, 경제, 부동산, 교육, 의료, 안전, 환경 등 생활 전반
4. **26년 시계열**: 2000~2025년 타임라인으로 장기 변화 추이 재생
5. **교통 인프라 오버레이**: 지하철 노선, 고속도로를 지도 위에 직접 시각화
6. **정적 배포 가능**: API 서버 없이도 CDN만으로 전체 플랫폼 제공

### 기술적 특징
- **MapLibre GL JS**: 오픈소스 WebGL 기반 지도 — Mapbox 종속 없음
- **GeoJSON 최적화**: 18MB → 2.5MB (좌표 정밀도 축소 + 폴리곤 단순화)
- **Rust 백엔드**: 메모리 안전 + 고성능 ETL 파이프라인
- **TypeScript 전면 적용**: 65개 지표 모두 타입 정의
- **반응형 디자인**: 데스크톱 사이드바 ↔ 모바일 바텀시트 자동 전환

## 장단점

### 장점
- API 키 없이 바로 실행 가능 (CARTO 오픈 타일)
- 정적 빌드로 서버 비용 최소화
- 250개 지역 × 65개 지표 = **16,250개 데이터 포인트** 한눈에
- CSV 내보내기로 외부 분석 도구 연계 용이
- 퍼스트 파티 온보딩 + 헬프 모달로 진입 장벽 낮춤

### 한계
- **현재 데모 데이터**: 실제 공공 데이터 API 연동은 ETL 파이프라인 구현 필요
- **실시간 아님**: 정적 JSON 기반이라 데이터 갱신 시 빌드 필요
- **서버사이드 분석 없음**: 복잡한 통계/ML 분석은 프론트엔드에서 처리 불가
- **모바일 UX 제약**: 65개 레이어 전환이 작은 화면에서는 복잡
- **접근성**: 스크린 리더, 키보드 내비게이션 최적화 미흡

## 확장 가능성

1. **실제 공공 데이터 연동**: data.go.kr API → Rust ETL → PostgreSQL → REST API
2. **ML 기반 예측**: 26년 시계열로 지역 성장/쇠퇴 예측 모델
3. **실시간 업데이트**: WebSocket으로 데이터 변경 시 즉시 반영
4. **사용자 커스텀 지표**: 65개 지표를 조합한 사용자 정의 복합 지표
5. **행정동 단위 확장**: 시군구 → 읍면동 단위로 세밀도 향상
6. **국제 비교**: OECD 지역 통계와 연계한 글로벌 벤치마크
7. **보고서 생성**: 선택 지역의 PDF 종합 분석 보고서 자동 생성
8. **알림 시스템**: 특정 지표가 임계치 이하로 떨어질 때 알림

## 포트폴리오 가치

이 프로젝트는 다음을 보여줍니다:

- **풀스택 역량**: React/Next.js 프론트엔드 + Rust 백엔드 + PostgreSQL
- **데이터 엔지니어링**: 이기종 공공데이터 통합 설계 (ETL 파이프라인)
- **지리공간 시각화**: MapLibre GL JS를 활용한 코로플레스 지도
- **대규모 데이터 처리**: 250개 지역 × 65개 지표 × 26년 시계열
- **UX/UI 디자인 감각**: 온보딩, 반응형, 접근성을 고려한 인터페이스
- **프로덕션 배포**: Docker Compose + Caddy + 정적 배포 파이프라인
- **도메인 이해**: 한국 공공데이터 생태계와 지역 경제 분석에 대한 이해

## 라이선스

MIT
